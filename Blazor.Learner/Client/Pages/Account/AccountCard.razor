@page  "/view/account/{accountId:int}"
@inject HttpClient http

<h3>Account Card : </h3>
<div class="component-box">
    <div class="row">
        <div class="col-6">
            <div class="form-group">
                <label>Local Account Number :</label>
                <div>
                    <h5>@account.LocalAccountNumber</h5>
                </div>
            </div>
            <div class="form-group ">
                <div>
                    <label>IBAN :</label>
                    <div>
                        <h5>@account.IBAN</h5>
                    </div>
                </div>
            </div>
            <div class="form-group ">
                <div>
                    <label>Bank :</label>
                    <div>
                        <h5>@account.BankName</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="component-box">
    @foreach (var balance in balances)
    {
        <div class="box-card">
            <div class="row">
                <h4 class="comment-content">@balance.BalanceAmount - @balance.BalanceDate</h4>
            </div>
        </div>
    }

</div>

@code {
    [Parameter] public int accountId { get; set; }
    Account account = new Account();
    Balance[] balances { get; set; } = { };


    protected async override Task OnParametersSetAsync()
    {
        account = await http.GetFromJsonAsync<Account>($"api/account/{accountId}");
        balances = await http.GetFromJsonAsync<Balance[]>($"api/account/balances/{accountId}");

    }
}
